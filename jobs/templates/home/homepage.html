{% extends "account/base.html" %}
{% block title %}Home{% endblock %}
{% block content %}

<div class="row">
    <div class="col-md-12">
        <!-- <div class="row mt-4">
            <div class="col-md-2 p-3 offset-md-3">
                <div class="counter-item background-3 p-3 text-center rounded">
                    <h2>Applied</h2>
                    <h1>{{ numApplications }}</h1>
                </div>
            </div>
            

            <div class="col-md-2 p-3">
                <div class="counter-item background-3 p-3 text-center rounded">
                    <h2>Rejected</h2>
                    <h1>{{ numRejected }}</h1>
                </div>
            </div>
            
            
            <div class="col-md-2 p-3">
                <div class="counter-item background-3 p-3 text-center rounded">
                    <h2>Offers</h2>
                    <h1>{{ numOffers }}</h1>
                </div>
            </div>
            
        </div> -->

        <div class="d-flex flex-column flex-md-row justify-content-center mt-4">
            <div class="counter-item background-3 p-3 my-3  mx-auto mx-md-3 w-50 w-md-auto text-center rounded">
                <h2>Applied</h2>
                <h1>{{ numApplications }}</h1>
            </div>
            <div class="counter-item background-3 p-3 my-3  mx-auto mx-md-3 w-50 w-md-auto text-center rounded">
                <h2>Rejected</h2>
                <h1>{{ numRejected }}</h1>
            </div>
            <div class="counter-item background-3 p-3 my-3  mx-auto mx-md-3 w-50 w-md-auto text-center rounded">
                <h2>Offers</h2>
                <h1>{{ numOffers }}</h1>
            </div>
        </div>



        <div class="d-flex justify-content-center mt-3 mb-1">
            <a href="{% url 'jobs:add' %}" class="btn btn-success font-weight-bold">Add Application</a>
        </div>


        <p style="text-align: center;">You can add any jobs you've applied to here.</p>



        <!-- <hr class="solid">
        <div class="companies-banner-container">
            <div>
                <h2>Company</h2>
                <p>Name of the company</p>
            </div>

            <div>  
                <h2>Stage</h2>
                <p>Current stage of application</p>
            </div>

            <div>    
                <h2>Date applied</h2>
                <p>Date you applied to the company</p>
            </div>

            <div> 
            </div>

            <div>
            </div>

            <div> 
            </div>


        </div>
        <hr class="solid">


        {% if applications %}
            <div class="application-container">
                {% for application in applications %}
                    <div class="application-item">

                        <div class="application-item-company-container">
                            <image class="application-item-company-container-image" 
                            width=40px src=" {{ application.company.logo_url }}"></image>

                            <a href="{% url 'jobs:company-detail' application.company.pk %}" class="application-item-company-container-name">
                                <p>{{application.company.name}}</p>
                            </a>
                        </div>



                        <div class="application-item-part-container">
                            {% if application.stage == 'Applied' %}
                                <div class="application-ipt-applied">
                                    <p>{{application.stage}}</p>
                                </div>
                            {% elif application.stage == 'Rejected' %}
                                <div class="application-ipt-rejected">
                                    <p>{{application.stage}}</p>
                                </div>
                            {% elif application.stage == 'Online Assessment' %}
                                <div class="application-ipt-oa">
                                    <p>{{application.stage}}</p>
                                </div>    
                            {% elif application.stage == '1st Round Interview' %}
                                <div class="application-ipt-1st">
                                    <p>{{application.stage}}</p>
                                </div> 
                            {% elif application.stage == '2nd Round Interview' %} 
                                <div class="application-ipt-2nd">
                                    <p>{{application.stage}}</p>
                                </div>
                            {% elif application.stage == '4th Round Interview' %} 
                                <div class="application-ipt-4th">
                                    <p>{{application.stage}}</p>
                                </div>   
                            {% elif application.stage == 'Given Offer' %} 
                                <div class="application-ipt-offer">
                                    <p>{{application.stage}}</p>
                                </div>  
                            {% else %}
                                <div class="application-ipt-3rd">
                                    <p>{{application.stage}}</p>
                                </div> 

                            {% endif %}   
                        </div>
                        
                        <div class="application-item-part-container">
                            <div class="application-item-company-container-name">
                                <p>{{application.date_applied}}</p>
                            </div>
                        </div>

                        <div class="application-item-part-container">
                            <div class="application-item-company-container-name">
                                <div class="dropdown show" style="padding-top: 6px;">
                                  <a href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                          <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                    </svg>

                                  </a>

                                    <div class="dropdown-menu" style="background-color: rgb(45, 70, 88);" aria-labelledby="dropdownMenuLink">

                                        <a href="{% url 'jobs:job-application-update' application.pk %}" class="dropdown-item">
                                            <p>edit</p>
                                        </a>
                                        <a href="{% url 'jobs:job-application-delete' application.pk %}" class="dropdown-item">
                                            <p>delete</p>
                                        </a>
                                    </div>
                                </div>
                            </div>






                        </div>
                    </div>

                    <hr class="solid">



                {% endfor %}
            </div>
        {% else %}
            <p>You haven't added any applications yet.</p>
        {% endif %} -->


        <div class="table-responsive mt-5">
            <table class="table table-borderless table-hover" style="background: #314a5c;">
                <thead class="background-3">
                    <tr>
                        <th style="vertical-align: top;" style="min-width: 100px;">
                            <h4 class="font-weight-bold">Logo</h4>
                        </th>
                        <th style="vertical-align: top; min-width: 160px;"> 
                            <h4 class="font-weight-bold">Company</h4>
                            (Name of the company)
                        </th>
                        <th style="vertical-align: top; min-width: 160px;"> 
                            <h4 class="font-weight-bold">Stage</h4>
                            (Current stage of application)
                        </th>
                        <th style="vertical-align: top; min-width: 160px;"> 
                            <h4 class="font-weight-bold">Date applied</h4>
                            (Date you applied to the company)
                        </th>
                        <th style="min-width: 50px;"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for application in applications %}

                        <tr>
                            <td><img src="{{ application.company.logo_url }}" style="width:50px;"></td>
                            <td>
                                <a href="{% url 'jobs:company-detail' application.company.pk %}" class="f-lg font-weight-bold text-info">{{application.company.name}}</a>
                            </td>
                            <td>
                                <div class="application-ipt-{{application.stage}} d-inline-block py-2 px-3 w-100 rounded text-center mx-auto f-lg">
                                    {{application.stage}}
                                </div>
                            </td>
                            <td>{{application.date_applied}}</td>
                            <td class="dropdown" style="cursor: pointer;">
                                <span class="dropdown-toggle" data-toggle="dropdown">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                          <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                    </svg>
                                </span>
                                <div class="dropdown-menu">
                                    <a href="{% url 'jobs:job-application-update' application.pk %}" class="dropdown-item text-primary">Edit</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="{% url 'jobs:job-application-delete' application.pk %}" class="dropdown-item text-primary">Delete</a>
                                </div>
                            </td>
                        </tr>

                    {% endfor %}
                </tbody>
            </table>
        </div>


    </div>
</div>





{% endblock %}
